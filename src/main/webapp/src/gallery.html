<div id="highlights">
<div class="container">
	<div class="one-of-one">
		<h1>Gallery</h1>
		<p>Take a look at all the awesome games that have already been made with libgdx. <br />You made a cool game yourself and want it to appear here?</p>
		<a class="btn" href="editentry.html">Submit your game</a>
	</div>
</div>
</div>

<div class="container" id="gallery">
</div>

<script>
function loadGallery(data) {
	$("#tabletinner").html('<a href="showentry.html?id="' + data[0].id + '><img src="' + data[0].imageUrls[0] + '"/></a>');
	var topgames = $("#gallery");
	for(var i=0; i < data.length; i++) {
		var game = data[i];
		if(game.description != null && game.description.length > 140) {
		  game.description = game.description.substring(0, 100) + "...";
		}
		if(game.description == null) {
		  game.description = "";
		}
		var div = $(document.createElement("div")).addClass("unit").addClass("one-of-four");
		div.html('<a href="showentry.html?id=' + game.id + '">' +
				'<span><span class="gametitle">' + game.title + '</span> by ' + game.creator +'</span>'+ 
				 '<img src="' + (game.imageUrls.length > 0?game.imageUrls[0]:"img/no_game.png") + '"></img>' +
				 '<p>'+game.description +'</p>'+
				 "</a>");
		topgames.append(div);
	}
}

$(document).ready(function() {
	$.ajax({
		url: "http://" + window.location.host.split(":")[0] + ":7777/libgdx-site/service/games",
		success: loadGallery,
		dataType: "json",
		error: function() {
			loadGallery(testGames(16));
		}
	})
});
</script>
